<!--
; Title:  leadley-exercise-8.3.html
; Author: Kurt Leadley
; Date:   22 July 2019
; Description: jQuery Putting it all together
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Assignment 8.4</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../site.css">
  <style type="text/css">
    #employees-table tbody tr:hover {
      cursor: pointer;
      background-color: #ffff99;
    }
  </style>
</head>
<body>

<div id="emps">
</div>

<script type="text/javascript">
  $(function () {
    // create a function that will be used to construct employee objects
    function Employee(id,firstName,lastName,title) {
      this.id = id;
      this.firstName = firstName;
      this.lastName = lastName;
      this.title = title;
    }
    // create an array that constructs 5 employee objects
    var employeesArray = [
      new Employee(1,'Kurt','Leadley','Web Developer'),
      new Employee(2,'John','Smith','Cook'),
      new Employee(3,'Jane','Doe','Bartender'),
      new Employee(4,'Billy','Bell','Software Engineer'),
      new Employee(5,'Kelly','Sanders','Database Developer')
    ];
    var output = "<table id='employees-table'>" +
      "<thead>" +
        "<th>ID</th>" +
        "<th>First Name</th>"+
        "<th>Last Name</th>"+
        "<th>Title</th>"+
      "</thead>"+
      "<tbody>" +
      "</tbody>" +
    "</table>" ;
    // innterHTML is not a jQuery function, using html instead
    $('#emps').html(output);
    // for each item in the employees array, call it an employee, pass it in and....
    employeesArray.forEach(function(employee) {
      // then get the properties of each employee object
      var id = employee.id
      var first = employee.firstName;
      var last = employee.lastName;
      var title = employee.title;
      // make an output string foreach employee row
      var outputRow = "<tr><td>"+id+"</td><td>"+first+"</td><td>"+last+"</td><td>"+title+"</td></tr>";
      // add the rows to the table
      $('#emps #employees-table tbody').append(outputRow);
    });
    $("table tr").click(function () {
      var id = $(this).find('td:first').html();
      getEmployee(id);
    });
    // pass id into this function and get that rows data out of the array of objects
    function getEmployee(id) {
      // https://stackoverflow.com/questions/7364150/find-object-by-id-in-an-array-of-javascript-objects
      var item = employeesArray.find(item => item.id == id);
      alert(item.id+" "+item.firstName+" "+item.lastName+" "+item.title);
    }
  });
</script>
</body>
</html>
